{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"F:\\\\beliefchallenge\\\\beliefchallenge_client\\\\components\\\\post\\\\postCom\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faUserCircle, faThumbtack } from \"@fortawesome/free-solid-svg-icons\";\nimport pinpost from 'assets/images/pinpost.png';\nimport pinposted from 'assets/images/pinposted.png';\nimport profilelogo from 'assets/images/profilelogo.png';\nimport comment from 'assets/images/comment.png';\nimport share from 'assets/images/share.png';\nimport likeIcon from 'assets/images/like.png';\nimport Comment from 'comment';\nimport postdeleteicon from 'assets/images/postdeleteicon.png';\nimport ShareCom from '../../share';\nimport genericfunctions from 'utilfunction/util-api-service';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport moment from 'moment';\nimport { BASEURL } from 'common/config';\nimport { showModal, addPostLike, removePostLike } from 'redux/action/generalAction';\nlibrary.add(faUserCircle, faThumbtack);\n\nclass postCom extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleOpenCommentPanel\", () => {\n      let {\n        sharePanel,\n        commentPanel\n      } = this.state; // this.setState({ commentPanel: commentPanel == true ? false : true, sharePanel: false })\n\n      this.setState({\n        commentPanel: !commentPanel,\n        sharePanel: false\n      });\n    });\n\n    _defineProperty(this, \"handleOpenSharePanel\", () => {\n      let {\n        sharePanel,\n        commentPanel\n      } = this.state; // this.setState({ sharePanel: sharePanel == true ? false : true, commentPanel: false })\n\n      this.setState({\n        sharePanel: !sharePanel,\n        commentPanel: false\n      });\n    });\n\n    _defineProperty(this, \"chnageCommentpanel\", () => {\n      // console.log(\"abc\")\n      this.setState({\n        commentPanel: false,\n        sharePanel: false\n      });\n    });\n\n    _defineProperty(this, \"pinPostHandle\", () => {\n      let params = {\n        postId: this.props.data._id,\n        isPin: this.props.pinPost,\n        socialLogin: this.props.auth.authUser.socialLogin // socialLogin:\"abc\"\n\n      }; // let postId = { postId: this.props.data._id }\n\n      genericfunctions._updateRequest('/post/pinpost', params).then(res => {// this.props.fetchPost()\n      });\n    });\n\n    _defineProperty(this, \"deletePost\", () => {\n      let userData = {\n        postId: this.props.data._id,\n        role: this.props.auth.authUser.role,\n        userId: this.props.auth.authUser.userId,\n        socialLogin: this.props.auth.authUser.socialLogin\n      };\n\n      genericfunctions._deleteRequest(`/post`, userData).then(res => {// this.props.fetchPost()\n      });\n    });\n\n    _defineProperty(this, \"deletePrompt\", postId => {\n      this.props.showModal({\n        showModal: true,\n        postId\n      });\n    });\n\n    _defineProperty(this, \"pinPostHandle\", () => {\n      let params = {\n        postId: this.props.data._id,\n        isPin: this.props.pinPost,\n        socialLogin: this.props.auth.authUser.socialLogin\n      }; // let postId = { postId: this.props.data._id }\n\n      genericfunctions._updateRequest('/post/pinpost', params).then(res => {\n        this.props.fetchPinPost();\n        Router.router.push(Router.router.asPath);\n      });\n    });\n\n    _defineProperty(this, \"pinPostPrompt\", () => {\n      this.props.showModal({\n        showModal: true\n      });\n    });\n\n    _defineProperty(this, \"showMore\", () => {\n      let {\n        readMore\n      } = this.state;\n      this.setState({\n        readMore: readMore = !readMore\n      });\n    });\n\n    _defineProperty(this, \"handleLike\", flag => {\n      this.setState({\n        processing: true\n      });\n      let {\n        likeFlag,\n        postLikeCount,\n        isLike\n      } = this.state;\n      let params = {\n        postId: this.props.data._id,\n        likeFlag: flag\n      }; // console.log(this.props.generalData.postLikes, flag == 'add' && isLike[0] != params.postId)\n\n      genericfunctions._postRequest('/likepost', params).then(res => {\n        if (res.data.response.status) {\n          this.props.addPostLike(params).then(res => {\n            if (res) {\n              this.setState({\n                postLikeCount: flag == 'add' ? ++postLikeCount : --postLikeCount\n              }); // if (flag == 'add') {\n              //     this.setState({ postLikeCount: ++postLikeCount })\n              // }\n              // if (flag == 'remove') {\n              //     // this.props.removePostLike(params)\n              //     //     .then(res => {\n              //     //         this.setState({ isLike: this.props.generalData.postLikes })\n              //     //     })\n              //     this.setState({ postLikeCount: --postLikeCount })\n              // }\n\n              this.setState({\n                isLike: res.filter(i => i == this.props.data._id)\n              });\n            }\n          });\n          this.setState({\n            processing: false\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleClick\", url => {\n      Router.push(url);\n    });\n\n    _defineProperty(this, \"fetchComments\", () => {\n      // console.log(this.props.data)\n      let queryparams = {\n        params: {\n          postId: this.props.data._id,\n          createdBy: this.props.data.createdBy,\n          skip: 0,\n          limit: 1\n        }\n      };\n\n      genericfunctions._fetchWithParams(`/comment`, queryparams).then(res => {\n        if (res.data.response.status) {\n          this.setState({\n            commentCount: res.data.response.count ? res.data.response.count : 0\n          });\n        }\n      });\n    });\n\n    this.state = {\n      commentPanel: false,\n      sharePanel: false,\n      postCategory: '',\n      chnageCommentpanel: this.chnageCommentpanel.bind(this),\n      readMore: this.props.data.postQuestion.length > 100 ? true : false,\n      showModal: false,\n      likeFlag: '',\n      postLikeCount: this.props.data.likes ? this.props.data.likes : 0,\n      isLike: [],\n      processing: false,\n      isLoggedIn: false,\n      commentCount: 0\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    let isLike = props.generalData.postLikes.filter(i => i == props.data._id);\n\n    if (isLike[0] == props.data._id) {\n      return _objectSpread({}, state, {\n        isLike\n      });\n    } else return null;\n  }\n\n  componentDidMount() {\n    this.fetchComments();\n    let authData = this.props.auth.authUser;\n\n    if (authData.token) {\n      this.setState({\n        isLoggedIn: true\n      });\n    }\n  }\n  /**\r\n   * fetch commments function\r\n   * @param {postId(string) limit(number) skip(number)}\r\n   */\n\n\n  // updateCommentCount = (commentCount) => {\n  //     this.setState({ commentCount })\n  // }\n  render() {\n    // let isLike = this.props.generalData.postLikes.filter(i => i == this.props.data._id)\n    let item = this.props.data;\n    let user = item.output[0];\n    let publishedDate = moment(item.createdDate).format('MMM DD, YYYY');\n    let publishedTime = moment(item.createdDate).format('hh:mm A');\n    let postCategory;\n    if (this.props.categoryData && this.props.categoryData.category.length > 0) postCategory = this.props.categoryData.category.filter(categoryid => categoryid._id == item.categoryId)[0];\n    let {\n      sharePanel,\n      commentPanel,\n      like,\n      readMore,\n      postLikeCount,\n      isLike,\n      processing,\n      commentCount\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"post-main-container mb-40\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: `${this.props.auth.authUser && this.props.auth.authUser.userId == user._id ? 'highlight-my-post' : ''} create-post p-30 bg-white`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"post-header row align-items-center justify-content-between mb-3 w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"col-9 d-flex pl-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: \"profile-pic d-flex align-items-center pic-large bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 33\n      }\n    }, __jsx(\"img\", {\n      src: user.profilePic.url ? user.profilePic.url : profilelogo,\n      alt: \"profilelogo\",\n      className: \"rounded-circle img-fluid\",\n      alt: \"Profile Picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 37\n      }\n    })), __jsx(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 33\n      }\n    }, __jsx(\"p\", {\n      className: \"m-0 font-weight-bold text-capitalize\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 37\n      }\n    }, \" \", item.output[0].fullName, \" \", this.props.auth.authUser && this.props.auth.authUser.userId == user._id && __jsx(\"small\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 192\n      }\n    }, \"(Posted by you)\")), __jsx(\"p\", {\n      className: \"m-0 font-weight-bold text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 37\n      }\n    }, publishedDate, \" at \", publishedTime))), __jsx(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 29\n      }\n    }, this.props.auth.authUser.role == 'admin' && __jsx(\"div\", {\n      className: \"p-2 mr-10 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 78\n      }\n    }, __jsx(\"img\", {\n      src: this.props.pinPost ? pinposted : pinpost,\n      alt: \"pinpiost\",\n      onClick: this.pinPostHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 37\n      }\n    })), (this.props.auth.authUser && this.props.auth.authUser.userId == user._id || this.props.auth.authUser.role == 'admin') && __jsx(\"div\", {\n      className: \"bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 37\n      }\n    }, __jsx(\"div\", {\n      className: \"btn btn-danger delete-post bd-highlight\",\n      onClick: () => this.deletePrompt(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 41\n      }\n    }, \" \", __jsx(\"img\", {\n      src: postdeleteicon,\n      alt: \"postdeleteicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 143\n      }\n    }), \" \")))), __jsx(\"div\", {\n      className: \"post-question cursor-pointer\",\n      onClick: () => this.handleClick(`/post-detail?postId=${item._id}`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 25\n      }\n    }, item.postQuestion && __jsx(React.Fragment, null, __jsx(\"p\", {\n      className: \"font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 53\n      }\n    }, \"I believe \", __jsx(\"ins\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 43\n      }\n    }, \" \", readMore ? `${item.postQuestion.substr(0, 100)}` : item.postQuestion, item.postQuestion.length > 100 ? __jsx(\"span\", {\n      className: \"cursor-pointer\",\n      onClick: this.showMore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 41\n      }\n    }, \"... \", __jsx(\"span\", {\n      className: \"font-weight-normal text-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 102\n      }\n    }, \" Read\", readMore ? ' More' : ' Less')) : undefined, __jsx(\"span\", {\n      className: \"text-bold times-roman\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 95\n      }\n    }, \",\"))), \" \", __jsx(\"p\", {\n      className: \"font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 34\n      }\n    }, \" but I might change my mind if: \"))), __jsx(\"div\", {\n      className: \"post-question-option\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, __jsx(\"p\", {\n      className: \"border-bottom d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      className: \"mr-15\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 65\n      }\n    }, \"1)\"), __jsx(\"span\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 98\n      }\n    }, item.options[0])), __jsx(\"p\", {\n      className: \"border-bottom d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      className: \"mr-15\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 65\n      }\n    }, \"2)\"), __jsx(\"span\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 98\n      }\n    }, item.options[1])), __jsx(\"p\", {\n      className: \"border-bottom d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      className: \"mr-15\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 65\n      }\n    }, \"3)\"), __jsx(\"span\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 98\n      }\n    }, item.options[2]))), __jsx(\"div\", {\n      className: \"post-fotter row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"col-xl-9 col-lg-12 col-12 d-sm-flex p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: \"col-sm-4 col-12 pl order-1 btn-wrap mt-10 pr-5\",\n      onClick: this.handleOpenCommentPanel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      className: `${commentPanel ? 'comment-active' : 'comment'} border commet-icon text-center align-self-cente blue-btn px-10`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 37\n      }\n    }, __jsx(\"p\", {\n      className: \"m-0 pt-10 pb-10 text-muted position-relative bc__comment-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 41\n      }\n    }, __jsx(\"div\", {\n      className: \"mr-5 bc__comment-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 45\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 49\n      }\n    }, commentCount)), \"Comment\"))), __jsx(\"div\", {\n      className: \"col-sm-4 col-12 text-center order-2 order-sm-2 mt-10  pl-5 pr-5\",\n      onClick: this.handleOpenSharePanel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      className: `${sharePanel ? 'share-active' : 'share'} border share-icon align-self-cente w-100 px-10`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 37\n      }\n    }, __jsx(\"p\", {\n      className: \"m-0 pt-10 pb-10 text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 41\n      }\n    }, __jsx(\"img\", {\n      src: share,\n      alt: \"pinpiost\",\n      className: \"mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 45\n      }\n    }), \"Share\")), sharePanel && __jsx(\"div\", {\n      className: \"w-100 mt-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 52\n      }\n    }, __jsx(ShareCom, {\n      url: `${BASEURL}post-detail?postId=${item._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 41\n      }\n    }))), __jsx(\"div\", {\n      className: \"col-sm-4 col-12 text-center order-2 order-sm-2 mt-10 pr-0 \" + (this.props.auth.authUser.token ? 'cursor-pointer' : ''),\n      onClick: this.props.auth.authUser.token ? () => this.handleLike(isLike.length > 0 && !processing ? 'remove' : 'add') : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      className: `${isLike.length > 0 ? 'like-active ' : 'like like-icon'}  w-100 `,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 37\n      }\n    }, __jsx(\"p\", {\n      className: \"m-0 pt-10 pb-10 text-center text-sm-left text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 41\n      }\n    }, __jsx(\"img\", {\n      src: likeIcon,\n      alt: \"pinpiost\",\n      className: \"mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 45\n      }\n    }), postLikeCount)))), __jsx(\"div\", {\n      className: \"col-xl-3 col-lg-12 mt-20 entertainment order-4 order-xl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: \"entertainment-icon text-center text-xl-right align-self-center w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 33\n      }\n    }, this.props.categoryData.category.length > 0 && __jsx(\"p\", {\n      className: \"m-0 text-muted font-weight-bold text-capitalize \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 85\n      }\n    }, __jsx(\"img\", {\n      src: postCategory.catIcon.url,\n      alt: \"pinpiost\",\n      className: \"mr-5 mb-1 img-invert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 41\n      }\n    }), postCategory.title))), commentPanel && __jsx(\"div\", {\n      className: \"order-3 order-xl-4 mt-10 px-15 w-100 comment-panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 46\n      }\n    }, __jsx(Comment, {\n      postItem: item,\n      commentCount: commentCount,\n      fetchComments: this.fetchComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    categoryData: state.category,\n    generalData: state.general\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    showModal: data => dispatch(showModal(data)),\n    addPostLike: data => dispatch(addPostLike(data)),\n    removePostLike: data => dispatch(removePostLike(data))\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(postCom);","map":{"version":3,"sources":["F:/beliefchallenge/beliefchallenge_client/components/post/postCom/index.js"],"names":["React","Component","library","faUserCircle","faThumbtack","pinpost","pinposted","profilelogo","comment","share","likeIcon","Comment","postdeleteicon","ShareCom","genericfunctions","connect","Router","moment","BASEURL","showModal","addPostLike","removePostLike","add","postCom","constructor","props","sharePanel","commentPanel","state","setState","params","postId","data","_id","isPin","pinPost","socialLogin","auth","authUser","_updateRequest","then","res","userData","role","userId","_deleteRequest","fetchPinPost","router","push","asPath","readMore","flag","processing","likeFlag","postLikeCount","isLike","_postRequest","response","status","filter","i","url","queryparams","createdBy","skip","limit","_fetchWithParams","commentCount","count","postCategory","chnageCommentpanel","bind","postQuestion","length","likes","isLoggedIn","getDerivedStateFromProps","generalData","postLikes","componentDidMount","fetchComments","authData","token","render","item","user","output","publishedDate","createdDate","format","publishedTime","categoryData","category","categoryid","categoryId","like","profilePic","fullName","pinPostHandle","deletePrompt","handleClick","substr","showMore","undefined","options","handleOpenCommentPanel","handleOpenSharePanel","handleLike","catIcon","title","mapStateToProps","general","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faUserCircle, faThumbtack } from \"@fortawesome/free-solid-svg-icons\";\r\nimport pinpost from 'assets/images/pinpost.png'\r\nimport pinposted from 'assets/images/pinposted.png'\r\nimport profilelogo from 'assets/images/profilelogo.png'\r\nimport comment from 'assets/images/comment.png'\r\nimport share from 'assets/images/share.png'\r\nimport likeIcon from 'assets/images/like.png'\r\nimport Comment from 'comment'\r\nimport postdeleteicon from 'assets/images/postdeleteicon.png'\r\nimport ShareCom from '../../share'\r\nimport genericfunctions from 'utilfunction/util-api-service'\r\nimport { connect } from 'react-redux';\r\nimport Router from 'next/router'\r\n\r\nimport moment from 'moment'\r\nimport { BASEURL } from 'common/config';\r\nimport { showModal, addPostLike, removePostLike } from 'redux/action/generalAction'\r\n\r\nlibrary.add(faUserCircle, faThumbtack);\r\n\r\nclass postCom extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            commentPanel: false,\r\n            sharePanel: false,\r\n            postCategory: '',\r\n            chnageCommentpanel: this.chnageCommentpanel.bind(this),\r\n            readMore: this.props.data.postQuestion.length > 100 ? true : false,\r\n            showModal: false,\r\n            likeFlag: '',\r\n            postLikeCount: this.props.data.likes ? this.props.data.likes : 0,\r\n            isLike: [],\r\n            processing: false,\r\n            isLoggedIn: false,\r\n            commentCount: 0\r\n        }\r\n\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        let isLike = props.generalData.postLikes.filter(i => i == props.data._id)\r\n        if (isLike[0] == props.data._id) {\r\n\r\n            return {\r\n                ...state,\r\n                isLike\r\n            }\r\n        }\r\n        else return null\r\n    }\r\n    handleOpenCommentPanel = () => {\r\n        let { sharePanel, commentPanel } = this.state\r\n        // this.setState({ commentPanel: commentPanel == true ? false : true, sharePanel: false })\r\n        this.setState({ commentPanel: !commentPanel, sharePanel: false })\r\n    }\r\n    handleOpenSharePanel = () => {\r\n        let { sharePanel, commentPanel } = this.state\r\n        // this.setState({ sharePanel: sharePanel == true ? false : true, commentPanel: false })\r\n        this.setState({ sharePanel: !sharePanel, commentPanel: false })\r\n    }\r\n    chnageCommentpanel = () => {\r\n        // console.log(\"abc\")\r\n        this.setState({ commentPanel: false, sharePanel: false })\r\n    }\r\n\r\n\r\n    /**\r\n     * fetch pin post funtion\r\n     * @param {postid(string)}\r\n     */\r\n    pinPostHandle = () => {\r\n        let params = {\r\n            postId: this.props.data._id,\r\n            isPin: this.props.pinPost,\r\n            socialLogin: this.props.auth.authUser.socialLogin,\r\n            // socialLogin:\"abc\"\r\n        }\r\n        // let postId = { postId: this.props.data._id }\r\n        genericfunctions._updateRequest('/post/pinpost', params).then(res => {\r\n            // this.props.fetchPost()\r\n\r\n        })\r\n    }\r\n    // componentWillUnmount() {\r\n    // this.setState({ commentPanel: false })\r\n    // }\r\n\r\n    /**\r\n    * delete  post funtion\r\n    * @param {postid(string)}\r\n    */\r\n    deletePost = () => {\r\n        let userData = {\r\n            postId: this.props.data._id,\r\n            role: this.props.auth.authUser.role,\r\n            userId: this.props.auth.authUser.userId,\r\n            socialLogin: this.props.auth.authUser.socialLogin\r\n        }\r\n        genericfunctions._deleteRequest(`/post`, userData).then(res => {\r\n            // this.props.fetchPost()\r\n        })\r\n    }\r\n    /**\r\n    * prompt delete  post funtion\r\n    * @param {delete(Boolean)}\r\n    */\r\n    deletePrompt = (postId) => {\r\n        this.props.showModal({ showModal: true, postId })\r\n    }\r\n    /**\r\n     * fetch pin post funtion\r\n     * @param {postid(string)}\r\n     */\r\n    pinPostHandle = () => {\r\n        let params = {\r\n            postId: this.props.data._id,\r\n            isPin: this.props.pinPost,\r\n            socialLogin: this.props.auth.authUser.socialLogin\r\n        }\r\n        // let postId = { postId: this.props.data._id }\r\n\r\n        genericfunctions._updateRequest('/post/pinpost', params).then(res => {\r\n            this.props.fetchPinPost()\r\n            Router.router.push(Router.router.asPath)\r\n        })\r\n    }\r\n\r\n\r\n    pinPostPrompt = () => {\r\n        this.props.showModal({ showModal: true, })\r\n    }\r\n\r\n    showMore = () => {\r\n        let { readMore } = this.state\r\n        this.setState({ readMore: readMore = !readMore })\r\n    }\r\n    handleLike = (flag) => {\r\n        this.setState({ processing: true })\r\n        let { likeFlag, postLikeCount, isLike } = this.state;\r\n        let params = {\r\n            postId: this.props.data._id,\r\n            likeFlag: flag\r\n        }\r\n        // console.log(this.props.generalData.postLikes, flag == 'add' && isLike[0] != params.postId)\r\n\r\n        genericfunctions._postRequest('/likepost', params).then(res => {\r\n            if (res.data.response.status) {\r\n\r\n                this.props.addPostLike(params).then(res => {\r\n                    if (res) {\r\n                        this.setState({ postLikeCount: flag == 'add' ? ++postLikeCount : --postLikeCount })\r\n\r\n                        // if (flag == 'add') {\r\n                        //     this.setState({ postLikeCount: ++postLikeCount })\r\n                        // }\r\n                        // if (flag == 'remove') {\r\n                        //     // this.props.removePostLike(params)\r\n                        //     //     .then(res => {\r\n                        //     //         this.setState({ isLike: this.props.generalData.postLikes })\r\n                        //     //     })\r\n                        //     this.setState({ postLikeCount: --postLikeCount })\r\n                        // }\r\n                        this.setState({ isLike: res.filter(i => i == this.props.data._id) })\r\n                    }\r\n                })\r\n                this.setState({ processing: false })\r\n\r\n\r\n            }\r\n        })\r\n    }\r\n    handleClick = (url) => {\r\n        Router.push(url)\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.fetchComments()\r\n        let authData = this.props.auth.authUser;\r\n        if (authData.token) {\r\n            this.setState({ isLoggedIn: true })\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * fetch commments function\r\n     * @param {postId(string) limit(number) skip(number)}\r\n     */\r\n    fetchComments = () => {\r\n        // console.log(this.props.data)\r\n        let queryparams = {\r\n            params: {\r\n                postId: this.props.data._id,\r\n                createdBy: this.props.data.createdBy,\r\n                skip: 0,\r\n                limit: 1\r\n            }\r\n        }\r\n        genericfunctions._fetchWithParams(`/comment`, queryparams).then(res => {\r\n\r\n            if (res.data.response.status) {\r\n                this.setState({ commentCount: res.data.response.count ? res.data.response.count : 0 })\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    // updateCommentCount = (commentCount) => {\r\n    //     this.setState({ commentCount })\r\n    // }\r\n\r\n    render() {\r\n        // let isLike = this.props.generalData.postLikes.filter(i => i == this.props.data._id)\r\n        let item = this.props.data\r\n        let user = item.output[0]\r\n        let publishedDate = moment(item.createdDate).format('MMM DD, YYYY')\r\n        let publishedTime = moment(item.createdDate).format('hh:mm A')\r\n        let postCategory;\r\n        if (this.props.categoryData && this.props.categoryData.category.length > 0)\r\n            postCategory = this.props.categoryData.category.filter(categoryid => categoryid._id == item.categoryId)[0]\r\n        let { sharePanel, commentPanel, like, readMore, postLikeCount, isLike, processing, commentCount } = this.state\r\n\r\n        return (\r\n            <>\r\n                <div className='post-main-container mb-40'>\r\n                    <div className={`${this.props.auth.authUser && this.props.auth.authUser.userId == user._id ? 'highlight-my-post' : ''} create-post p-30 bg-white`} >\r\n                        <div className='post-header row align-items-center justify-content-between mb-3 w-100'>\r\n                            <div className=\"col-9 d-flex pl-0\">\r\n                                <div className=\"profile-pic d-flex align-items-center pic-large bd-highlight\">\r\n                                    <img src={user.profilePic.url ? user.profilePic.url : profilelogo} alt=\"profilelogo\" className=\"rounded-circle img-fluid\" alt=\"Profile Picture\" />\r\n                                </div>\r\n                                <div className=\"p-2 bd-highlight\">\r\n                                    <p className='m-0 font-weight-bold text-capitalize'> {item.output[0].fullName} {this.props.auth.authUser && this.props.auth.authUser.userId == user._id && <small className=\"text-muted\">\r\n                                        (Posted by you)\r\n                                    </small>}</p>\r\n                                    <p className='m-0 font-weight-bold text-muted'>{publishedDate} at {publishedTime}</p>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"d-flex\">\r\n                                {this.props.auth.authUser.role == 'admin' && <div className=\"p-2 mr-10 bd-highlight\">\r\n                                    <img src={this.props.pinPost ? pinposted : pinpost} alt=\"pinpiost\" onClick={this.pinPostHandle} />\r\n                                </div>\r\n                                }\r\n                                {((this.props.auth.authUser && this.props.auth.authUser.userId == user._id) || this.props.auth.authUser.role == 'admin') &&\r\n                                    <div className='bd-highlight'>\r\n                                        <div className='btn btn-danger delete-post bd-highlight' onClick={() => this.deletePrompt(item._id)}> <img src={postdeleteicon} alt='postdeleteicon' /> </div>\r\n                                    </div>\r\n                                }\r\n\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <div className='post-question cursor-pointer' onClick={() => this.handleClick(`/post-detail?postId=${item._id}`)}>\r\n                            {item.postQuestion && <><p className='font-weight-bold'>\r\n                                I believe <ins> {readMore ?\r\n                                    `${item.postQuestion.substr(0, 100)}` :\r\n                                    (item.postQuestion)}\r\n                                    {item.postQuestion.length > 100 ?\r\n                                        <span className='cursor-pointer' onClick={this.showMore}>... <span className=\"font-weight-normal text-primary\"> Read\r\n                                   {readMore ? ' More' : ' Less'}</span></span> : (undefined)}<span className=\"text-bold times-roman\">,</span></ins>\r\n                            </p> <p className='font-weight-bold'> but I might change my mind if: </p></>}\r\n                            {/* <p className='font-weight-bold'>I believe <u>{item.postQuestion}</u>,\r\n                        //     but I might change my mind if:</p> */}\r\n                        </div>\r\n                        <div className='post-question-option'>\r\n\r\n                            <p className='border-bottom d-flex'><span className=\"mr-15\">1)</span><span className='text-muted'>{item.options[0]}</span></p>\r\n                            <p className='border-bottom d-flex'><span className=\"mr-15\">2)</span><span className='text-muted'>{item.options[1]}</span></p>\r\n                            <p className='border-bottom d-flex'><span className=\"mr-15\">3)</span><span className='text-muted'>{item.options[2]}</span></p>\r\n                        </div>\r\n                        <div className='post-fotter row'>\r\n                            <div className=\"col-xl-9 col-lg-12 col-12 d-sm-flex p-0\">\r\n                                <div className='col-sm-4 col-12 pl order-1 btn-wrap mt-10 pr-5' onClick={this.handleOpenCommentPanel}>\r\n                                    <div className={`${commentPanel ? 'comment-active' : 'comment'} border commet-icon text-center align-self-cente blue-btn px-10`}>\r\n                                        <p className='m-0 pt-10 pb-10 text-muted position-relative bc__comment-container'>\r\n                                            <div className=\"mr-5 bc__comment-count\">\r\n                                                <span>{commentCount}</span>\r\n                                            </div>\r\n                                            {/* <img src={comment} alt=\"pinpiost\" className='mr-5' />\r\n                                            <span className=\"comment-count\">{commentCount}</span> */}\r\n                                            Comment\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                {/* btn-wrap */}\r\n                                <div className='col-sm-4 col-12 text-center order-2 order-sm-2 mt-10  pl-5 pr-5' onClick={this.handleOpenSharePanel}>\r\n                                    <div className={`${sharePanel ? 'share-active' : 'share'} border share-icon align-self-cente w-100 px-10`} >\r\n                                        <p className='m-0 pt-10 pb-10 text-muted'>\r\n                                            <img src={share} alt=\"pinpiost\" className='mr-5' />\r\n                                            Share</p>\r\n                                    </div>\r\n                                    {/* {sharePanel && <div className=\"order-4 order-sm-6 pl-25 offset-xl-3 mt-10\"> */}\r\n                                    {sharePanel && <div className=\"w-100 mt-10\">\r\n                                        <ShareCom url={`${BASEURL}post-detail?postId=${item._id}`} />\r\n                                    </div>}\r\n                                </div>\r\n                                <div className=\r\n                                    {\"col-sm-4 col-12 text-center order-2 order-sm-2 mt-10 pr-0 \" + (this.props.auth.authUser.token ? 'cursor-pointer' : '')}\r\n                                    onClick={this.props.auth.authUser.token ? () => this.handleLike(isLike.length > 0 && !processing ? 'remove' : 'add') : null}\r\n                                >\r\n                                    <div className={`${isLike.length > 0 ? 'like-active ' : 'like like-icon'}  w-100 `} >\r\n                                        <p className='m-0 pt-10 pb-10 text-center text-sm-left text-muted'>\r\n                                            <img src={likeIcon} alt=\"pinpiost\" className='mr-5' />\r\n                                            {postLikeCount}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n                            <div className='col-xl-3 col-lg-12 mt-20 entertainment order-4 order-xl-3'>\r\n                                <div className='entertainment-icon text-center text-xl-right align-self-center w-100'>\r\n                                    {this.props.categoryData.category.length > 0 && <p className='m-0 text-muted font-weight-bold text-capitalize '>\r\n                                        <img src={postCategory.catIcon.url} alt=\"pinpiost\" className='mr-5 mb-1 img-invert' />\r\n                                        {postCategory.title}\r\n                                    </p>}\r\n                                </div>\r\n\r\n                            </div>\r\n                            {commentPanel && <div className=\"order-3 order-xl-4 mt-10 px-15 w-100 comment-panel\">\r\n                                <Comment postItem={item} commentCount={commentCount} fetchComments={this.fetchComments}/>\r\n                                {/* updateCommentCount={this.updateCommentCount} */}\r\n                            </div>}\r\n\r\n                        </div>\r\n                    </div >\r\n                </div >\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        auth: state.auth,\r\n        categoryData: state.category,\r\n        generalData: state.general\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        showModal: data => dispatch(showModal(data)),\r\n        addPostLike: data => dispatch(addPostLike(data)),\r\n        removePostLike: data => dispatch(removePostLike(data)),\r\n\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(postCom);"]},"metadata":{},"sourceType":"module"}