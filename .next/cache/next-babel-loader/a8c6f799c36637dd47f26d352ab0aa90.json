{"ast":null,"code":"var _jsxFileName = \"F:\\\\beliefchallenge\\\\beliefchallenge_client\\\\components\\\\post\\\\comment\\\\singleCom.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport $ from \"jquery\";\nimport { transformComment } from \"./helpers\";\nimport profilelogo from \"assets/images/profilelogo.png\";\nimport postdeleteicon from 'assets/images/postdeleteicon.png';\n/**\r\n * created by zain ahmed\r\n * created date: 20/12/2019\r\n * @param {*} props\r\n */\n\nclass SingleCom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentImage: ''\n    };\n  }\n\n  componentDidMount() {\n    const pClass = this;\n    const content = this.props.itm.content;\n    const urls = content.match(/\\bhttps?:\\/\\/\\S+/gi);\n\n    if (urls && urls.length) {\n      const url = `https://cors-anywhere.herokuapp.com/${urls[0]}`;\n      $.get(url, function (data) {\n        const doc = new DOMParser().parseFromString(data, \"text/html\");\n        const meta = doc.querySelector('meta[property=\"og:image\"]');\n        const commentImage = meta && meta.getAttribute(\"content\");\n        pClass.setState({\n          commentImage\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      commentImage\n    } = this.state;\n    let item = this.props.itm;\n    let user = item.user_profile ? item.user_profile : {};\n    let auth = this.props.auth;\n    let canDeleteComment = false;\n\n    if (auth.authUser && auth.authUser.userId == user._id || auth.authUser.role == 'admin') {\n      canDeleteComment = true;\n    }\n\n    const content = transformComment(item.content);\n    let publishedDate = moment(item.createdDate).format(\"MMM DD, YYYY\");\n    let publishedTime = moment(item.createdDate).format(\"hh:mm A\");\n    return __jsx(\"div\", {\n      className: \"show-comment d-flex pt-10 pl-20 pr-10 pb-10 border-bottom\",\n      style: this.props.length - this.props.ind === 1 ? {\n        borderBottomLeftRadius: \"20px\",\n        borderBottomRightRadius: \"8px\"\n      } : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"d-flex bd-highlight w-100 mt-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"profile-pic bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: user.profilePic && user.profilePic.url ? user.profilePic.url : profilelogo,\n      className: \"rounded-circle img-fluid\",\n      alt: \"profile picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    })), __jsx(\"div\", {\n      className: \"pl-15 comment-content bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      className: \"m-0 font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, user.fullName), __jsx(\"p\", {\n      className: \"m-0 text-muted\",\n      dangerouslySetInnerHTML: {\n        __html: content\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }), __jsx(\"p\", {\n      className: \"m-0 text-muted text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, publishedDate, \" at \", publishedTime)), commentImage !== \"\" ? __jsx(\"img\", {\n      src: commentImage,\n      className: \"w-100\",\n      alt: \"commentimage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }) : __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    })), canDeleteComment && __jsx(\"div\", {\n      className: \"bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"btn btn-danger delete-post bd-highlight\",\n      onClick: () => this.props.showConfirmModal(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, \" \", __jsx(\"img\", {\n      src: postdeleteicon,\n      alt: \"postdeleteicon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 129\n      }\n    }), \" \"))));\n  }\n\n}\n\nexport default SingleCom;","map":{"version":3,"sources":["F:/beliefchallenge/beliefchallenge_client/components/post/comment/singleCom.js"],"names":["React","Component","moment","$","transformComment","profilelogo","postdeleteicon","SingleCom","constructor","props","state","commentImage","componentDidMount","pClass","content","itm","urls","match","length","url","get","data","doc","DOMParser","parseFromString","meta","querySelector","getAttribute","setState","render","item","user","user_profile","auth","canDeleteComment","authUser","userId","_id","role","publishedDate","createdDate","format","publishedTime","ind","borderBottomLeftRadius","borderBottomRightRadius","undefined","profilePic","fullName","__html","showConfirmModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport $ from \"jquery\";\r\n\r\nimport { transformComment } from \"./helpers\";\r\nimport profilelogo from \"assets/images/profilelogo.png\";\r\nimport postdeleteicon from 'assets/images/postdeleteicon.png'\r\n\r\n/**\r\n * created by zain ahmed\r\n * created date: 20/12/2019\r\n * @param {*} props\r\n */\r\n\r\nclass SingleCom extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcommentImage: '',\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst pClass = this;\r\n\r\n\t\tconst content = this.props.itm.content\r\n\t\tconst urls = content.match(/\\bhttps?:\\/\\/\\S+/gi);\r\n\r\n\t\tif (urls && urls.length) {\r\n\t\t\tconst url = `https://cors-anywhere.herokuapp.com/${urls[0]}`;\r\n\r\n      $.get(url, function (data) {\r\n        const doc = new DOMParser().parseFromString(data, \"text/html\");\r\n        const meta = doc.querySelector('meta[property=\"og:image\"]');\r\n\t\t\t\tconst commentImage = meta && meta.getAttribute(\"content\");\r\n\t\t\t\tpClass.setState({ commentImage });\r\n      });\r\n\t\t}\r\n    }\r\n\r\n\trender() {\r\n\t\tconst { commentImage } = this.state;\r\n\t\tlet item = this.props.itm;\r\n        let user = item.user_profile ? item.user_profile : {};\r\n        \r\n        let auth = this.props.auth\r\n        let canDeleteComment = false;\r\n        if ((auth.authUser && auth.authUser.userId == user._id) || auth.authUser.role == 'admin') {\r\n            canDeleteComment = true\r\n        }\r\n\r\n\t\tconst content = transformComment(item.content);\r\n\r\n\t\tlet publishedDate = moment(item.createdDate).format(\"MMM DD, YYYY\");\r\n\t\tlet publishedTime = moment(item.createdDate).format(\"hh:mm A\");\r\n\r\n\t\treturn (\r\n      <div\r\n        className=\"show-comment d-flex pt-10 pl-20 pr-10 pb-10 border-bottom\"\r\n        style={\r\n          this.props.length - this.props.ind === 1\r\n            ? { borderBottomLeftRadius: \"20px\", borderBottomRightRadius: \"8px\" }\r\n            : undefined\r\n        }\r\n      >\r\n        <div className=\"d-flex bd-highlight w-100 mt-10\">\r\n          <div className=\"profile-pic bd-highlight\">\r\n            <img\r\n              src={\r\n                user.profilePic && user.profilePic.url\r\n                  ? user.profilePic.url\r\n                  : profilelogo\r\n              }\r\n              className=\"rounded-circle img-fluid\"\r\n              alt=\"profile picture\"\r\n            />\r\n          </div>\r\n          <div className=\"pl-15 comment-content bd-highlight\">\r\n            <p className=\"m-0 font-weight-bold\">{user.fullName}</p>\r\n            <p\r\n              className=\"m-0 text-muted\"\r\n              dangerouslySetInnerHTML={{ __html: content }}\r\n            />\r\n            <p className=\"m-0 text-muted text-right\">\r\n              <small>\r\n                {publishedDate} at {publishedTime}\r\n              </small>\r\n            </p>\r\n            \r\n            {commentImage !== \"\" ? (\r\n              <img src={commentImage} className=\"w-100\" alt=\"commentimage\" />\r\n            ) : (\r\n              <span />\r\n            )}\r\n          </div>\r\n          {canDeleteComment &&\r\n            <div className='bd-highlight'>\r\n                <div className='btn btn-danger delete-post bd-highlight' onClick={() => this.props.showConfirmModal(item._id)}> <img src={postdeleteicon} alt='postdeleteicon' /> </div>\r\n            </div>\r\n            }\r\n        </div>\r\n      </div>\r\n    );\r\n\t}\r\n}\r\n\r\nexport default SingleCom;\r\n"]},"metadata":{},"sourceType":"module"}