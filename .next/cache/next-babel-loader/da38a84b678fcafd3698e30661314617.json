{"ast":null,"code":"import _Reflect$construct from \"@babel/runtime-corejs2/core-js/reflect/construct\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\beliefchallenge\\\\beliefchallenge_client\\\\components\\\\post\\\\comment\\\\singleCom.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = _Reflect$construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false; if (_Reflect$construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(_Reflect$construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport moment from \"moment\";\nimport $ from \"jquery\";\nimport { transformComment } from \"./helpers\";\nimport profilelogo from \"assets/images/profilelogo.png\";\nimport postdeleteicon from 'assets/images/postdeleteicon.png';\n/**\r\n * created by zain ahmed\r\n * created date: 20/12/2019\r\n * @param {*} props\r\n */\n\nvar SingleCom = /*#__PURE__*/function (_Component) {\n  _inherits(SingleCom, _Component);\n\n  var _super = _createSuper(SingleCom);\n\n  function SingleCom(props) {\n    var _this;\n\n    _classCallCheck(this, SingleCom);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      commentImage: ''\n    };\n    return _this;\n  }\n\n  _createClass(SingleCom, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var pClass = this;\n      var content = this.props.itm.content;\n      var urls = content.match(/\\bhttps?:\\/\\/\\S+/gi);\n\n      if (urls && urls.length) {\n        var url = \"https://cors-anywhere.herokuapp.com/\".concat(urls[0]);\n        $.get(url, function (data) {\n          var doc = new DOMParser().parseFromString(data, \"text/html\");\n          var meta = doc.querySelector('meta[property=\"og:image\"]');\n          var commentImage = meta && meta.getAttribute(\"content\");\n          pClass.setState({\n            commentImage: commentImage\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var commentImage = this.state.commentImage;\n      var item = this.props.itm;\n      var user = item.user_profile ? item.user_profile : {};\n      var auth = this.props.auth;\n      var canDeleteComment = false;\n\n      if (auth.authUser && auth.authUser.userId == user._id || auth.authUser.role == 'admin') {\n        canDeleteComment = true;\n      }\n\n      var content = transformComment(item.content);\n      var publishedDate = moment(item.createdDate).format(\"MMM DD, YYYY\");\n      var publishedTime = moment(item.createdDate).format(\"hh:mm A\");\n      return __jsx(\"div\", {\n        className: \"show-comment d-flex pt-10 pl-20 pr-10 pb-10 border-bottom\",\n        style: this.props.length - this.props.ind === 1 ? {\n          borderBottomLeftRadius: \"20px\",\n          borderBottomRightRadius: \"8px\"\n        } : undefined,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"d-flex bd-highlight w-100 mt-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"profile-pic bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }, __jsx(\"img\", {\n        src: user.profilePic && user.profilePic.url ? user.profilePic.url : profilelogo,\n        className: \"rounded-circle img-fluid\",\n        alt: \"profile picture\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      })), __jsx(\"div\", {\n        className: \"pl-15 comment-content bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }, __jsx(\"p\", {\n        className: \"m-0 font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      }, user.fullName), __jsx(\"p\", {\n        className: \"m-0 text-muted\",\n        dangerouslySetInnerHTML: {\n          __html: content\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }), __jsx(\"p\", {\n        className: \"m-0 text-muted text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }\n      }, __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }\n      }, publishedDate, \" at \", publishedTime)), commentImage !== \"\" ? __jsx(\"img\", {\n        src: commentImage,\n        className: \"w-100\",\n        alt: \"commentimage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }\n      }) : __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }\n      })), canDeleteComment && __jsx(\"div\", {\n        className: \"bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"btn btn-danger delete-post bd-highlight\",\n        onClick: function onClick() {\n          return _this2.props.showConfirmModal(item._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }, \" \", __jsx(\"img\", {\n        src: postdeleteicon,\n        alt: \"postdeleteicon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 129\n        }\n      }), \" \"))));\n    }\n  }]);\n\n  return SingleCom;\n}(Component);\n\nexport default SingleCom;","map":{"version":3,"sources":["F:/beliefchallenge/beliefchallenge_client/components/post/comment/singleCom.js"],"names":["React","Component","moment","$","transformComment","profilelogo","postdeleteicon","SingleCom","props","state","commentImage","pClass","content","itm","urls","match","length","url","get","data","doc","DOMParser","parseFromString","meta","querySelector","getAttribute","setState","item","user","user_profile","auth","canDeleteComment","authUser","userId","_id","role","publishedDate","createdDate","format","publishedTime","ind","borderBottomLeftRadius","borderBottomRightRadius","undefined","profilePic","fullName","__html","showConfirmModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport $ from \"jquery\";\r\n\r\nimport { transformComment } from \"./helpers\";\r\nimport profilelogo from \"assets/images/profilelogo.png\";\r\nimport postdeleteicon from 'assets/images/postdeleteicon.png'\r\n\r\n/**\r\n * created by zain ahmed\r\n * created date: 20/12/2019\r\n * @param {*} props\r\n */\r\n\r\nclass SingleCom extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tcommentImage: '',\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst pClass = this;\r\n\r\n\t\tconst content = this.props.itm.content\r\n\t\tconst urls = content.match(/\\bhttps?:\\/\\/\\S+/gi);\r\n\r\n\t\tif (urls && urls.length) {\r\n\t\t\tconst url = `https://cors-anywhere.herokuapp.com/${urls[0]}`;\r\n\r\n      $.get(url, function (data) {\r\n        const doc = new DOMParser().parseFromString(data, \"text/html\");\r\n        const meta = doc.querySelector('meta[property=\"og:image\"]');\r\n\t\t\t\tconst commentImage = meta && meta.getAttribute(\"content\");\r\n\t\t\t\tpClass.setState({ commentImage });\r\n      });\r\n\t\t}\r\n    }\r\n\r\n\trender() {\r\n\t\tconst { commentImage } = this.state;\r\n\t\tlet item = this.props.itm;\r\n        let user = item.user_profile ? item.user_profile : {};\r\n        \r\n        let auth = this.props.auth\r\n        let canDeleteComment = false;\r\n        if ((auth.authUser && auth.authUser.userId == user._id) || auth.authUser.role == 'admin') {\r\n            canDeleteComment = true\r\n        }\r\n\r\n\t\tconst content = transformComment(item.content);\r\n\r\n\t\tlet publishedDate = moment(item.createdDate).format(\"MMM DD, YYYY\");\r\n\t\tlet publishedTime = moment(item.createdDate).format(\"hh:mm A\");\r\n\r\n\t\treturn (\r\n      <div\r\n        className=\"show-comment d-flex pt-10 pl-20 pr-10 pb-10 border-bottom\"\r\n        style={\r\n          this.props.length - this.props.ind === 1\r\n            ? { borderBottomLeftRadius: \"20px\", borderBottomRightRadius: \"8px\" }\r\n            : undefined\r\n        }\r\n      >\r\n        <div className=\"d-flex bd-highlight w-100 mt-10\">\r\n          <div className=\"profile-pic bd-highlight\">\r\n            <img\r\n              src={\r\n                user.profilePic && user.profilePic.url\r\n                  ? user.profilePic.url\r\n                  : profilelogo\r\n              }\r\n              className=\"rounded-circle img-fluid\"\r\n              alt=\"profile picture\"\r\n            />\r\n          </div>\r\n          <div className=\"pl-15 comment-content bd-highlight\">\r\n            <p className=\"m-0 font-weight-bold\">{user.fullName}</p>\r\n            <p\r\n              className=\"m-0 text-muted\"\r\n              dangerouslySetInnerHTML={{ __html: content }}\r\n            />\r\n            <p className=\"m-0 text-muted text-right\">\r\n              <small>\r\n                {publishedDate} at {publishedTime}\r\n              </small>\r\n            </p>\r\n            \r\n            {commentImage !== \"\" ? (\r\n              <img src={commentImage} className=\"w-100\" alt=\"commentimage\" />\r\n            ) : (\r\n              <span />\r\n            )}\r\n          </div>\r\n          {canDeleteComment &&\r\n            <div className='bd-highlight'>\r\n                <div className='btn btn-danger delete-post bd-highlight' onClick={() => this.props.showConfirmModal(item._id)}> <img src={postdeleteicon} alt='postdeleteicon' /> </div>\r\n            </div>\r\n            }\r\n        </div>\r\n      </div>\r\n    );\r\n\t}\r\n}\r\n\r\nexport default SingleCom;\r\n"]},"metadata":{},"sourceType":"module"}